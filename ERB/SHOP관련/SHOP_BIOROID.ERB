@BIOCHARA_SHOP
#DIM CHARANUM_LAST_ITEM
CHARANUM_LAST_ITEM = CHARANUM_START_ITEM + TOTAL_CHARANUM

WHILE RESULT != 0
    DRAWLINEFORM =
    CALL SET_BIO_SALES(CHARANUM_START_ITEM, CHARANUM_LAST_ITEM)

    CALL SHOW_SALES_LIST(CHARANUM_START_ITEM, CHARANUM_LAST_ITEM)
    PRINTL
    PRINTL
    PRINTFORML [0] 돌아간다
    PRINTL
    DRAWLINE
    INPUT
    IF RESULT == 0
    ELSEIF EXISTCSV(RESULT)
        CALL BIO_BUYSELL(RESULT)
    ENDIF
WEND

@SET_BIO_SALES(ARG, ARG:1)
FOR LOCAL, ARG, ARG:1
    COUNT = 1
    LOCAL:1 = LOCAL - ARG
    IF GETCHARA(LOCAL:1) != -1
        IF ITEMNAME:LOCAL == ""
            CONTINUE
        ELSEIF CFLAG:COUNT:현재보유중
            CONTINUE
        ENDIF
        ITEMSALES:LOCAL = 1
    ENDIF
    COUNT ++
NEXT

@BIO_BUYSELL(ARG)
#DIM C_ITEMID
#DIM R_ID

C_ITEMID = ARG + CHARANUM_START_ITEM
R_ID = GETCHARA(ARG)

CLEARLINE 1
PRINTL
PRINTFORMC No.{NO:R_ID} %NAME:R_ID%
PRINTFORMC 소속: %STR:((TALENT:R_ID:13) + 300)%
MONEYSTR ITEMPRICE:C_ITEMID
PRINTFORMC 가격: %RESULTS% 현재수량 {ITEMSALES:C_ITEMID}
SIF CSTR:R_ID:캐릭터소개 != ""
    PRINTSL %CSTR:R_ID:캐릭터소개%
PRINTW

PRINTL 구매하시겠습니까?
CALL ASK_YN
IF RESULT == 0
    MONEY:1 -= ITEMPRICE:C_ITEMID
    ITEM:C_ITEMID += 1
    ITEMSALES:C_ITEMID = 0
    PRINTW 구매하였습니다.
ELSE
    PRINTW 구매하지 않습니다.
    RETURN 1
ENDIF
PRINTV ITEM:C_ITEMID
PRINTVW ITEMSALES:C_ITEMID
