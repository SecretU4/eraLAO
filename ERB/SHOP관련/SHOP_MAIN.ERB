;===========================================================
;파일명: SHOP_MAIN.ERB
;상점 기능 처리
;===========================================================
@MAIN_SHOP

PRINTL 상점에 오신 것을 환영합니다.

PRINTFORML [1] 바이오로이드 상점
PRINTFORML [2] 선물 상점
PRINTFORML [3] 집 확장
PRINTFORML [4] 특수능력
PRINTFORML [5] 주식시장
PRINTL
PRINTFORML [0] 돌아가기
$SELECT_SHOPMENU
INPUT
SELECTCASE RESULT
    CASE 0
        RETURN 0
    CASE 1
        CALL BIOCHARA_SHOP
    CASE 2
        CALL ITEM_SHOP
    CASE 3
        CALL REAL_ESTATE
    CASE 4
        CALL SPECIAL_TALENT_SHOP
    CASE 5
        CALL STOCK_MARKET
    CASEELSE
        GOTO SELECT_SHOPMENU
ENDSELECT

@SHOW_SALES_LIST(ARG:0, ARG:1, ARG:2=0)
FOR COUNT, ARG:0, ARG:1
    MONEYSTR ITEMPRICE:COUNT
    PRINTFORMC [{COUNT}] %ITEMNAME:COUNT% %RESULTS% 
NEXT

@BIOCHARA_SHOP
#DIM CHARANUM_LAST_ITEM
CHARANUM_LAST_ITEM = CHARANUM_START_ITEM + TOTAL_CHARANUM
CALL SET_BIO_SALES(CHARANUM_START_ITEM, CHARANUM_LAST_ITEM)

CALL SHOW_SALES_LIST(CHARANUM_START_ITEM, CHARANUM_LAST_ITEM)

@SET_BIO_SALES(ARG, ARG:1)
FOR LOCAL, ARG, ARG:1
    IF CFLAG:LOCAL:현재보유중
        CONTINUE
    ELSEIF GETCHARA(LOCAL)
        ITEMSALES:LOCAL = 1
    ENDIF
NEXT

@SET_ITEM_SALES(ARG:0, ARG:1)
FOR LOCAL, ARG:0, ARG:1
    IF ITEMNAME:LOCAL == ""
        CONTINUE
    ELSE
        ITEMSALES:LOCAL = 5
    ENDIF
NEXT

@SET_EX_ITEM_SALES(ARG:0, ARG:1)
FOR LOCAL, ARG:0, ARG:1
    IF ITEMNAME:LOCAL = ""
        CONTINUE
    ELSEIF ITEM:LOCAL >= 1
        CONTINUE
    ELSE
        ITEMSALES:LOCAL = 1
    ENDIF
NEXT

@ITEM_SHOP
#DIM INDEX_START = 0
#DIM INDEX_END = 50
CALL SET_ITEM_SALES(INDEX_START, INDEX_END)

CALL SHOW_SALES_LIST(INDEX_START, INDEX_END)

@REAL_ESTATE
#DIM INDEX_START = 200
#DIM INDEX_END = 203

;추후 하루 지날때마다로 이관
ITEMSALES:203 = 1

CALL SHOW_SALES_LIST(INDEX_START, INDEX_END)

@SPECIAL_TALENT_SHOP
#DIM INDEX_START = 51
#DIM INDEX_END = 99
CALL SET_EX_ITEM_SALES(INDEX_START, INDEX_END)

CALL SHOW_SALES_LIST(INDEX_START, INDEX_END)
