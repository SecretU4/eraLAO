;SYSTEM_CALL
;연애 커맨드 진입시
@EVENTTRAIN

CALL SET_MSG_CSTR(TARGET)

SELECTCASE NO:TARGET
    CASE 51
        IF TALENT:정신쇠약 == 2 && !CFLAG:etc2
            CSTR:1 = fBreak
        ELSEIF CFLAG:etc4 == 5
            CSTR:1 = nHeal
        ELSEIF CFLAG:etc3 == 5
            CSTR:1 = nWeak
        ELSEIF CFLAG:etc4 < 5 && CFLAG:etc4 > 0 && !CFLAG:etc6
            CSTR:1 = Heal
        ELSEIF CFLAG:etc3 < 5 && CFLAG:etc3 > 0 && !CFLAG:etc5
            CSTR:1 = fWeak
        ELSEIF TALENT:사랑 == 2 && !CFLAG:etc1
            CSTR:1 = fLove
        ENDIF
    CASE 68
        IF TALENT:정신쇠약 == 1 && TALENT:사랑 == 2
            CSTR:1 = Weak2
        ELSEIF CFLAG:공포 > 199 && TALENT:사랑 == 2
            CSTR:1 = Fear2
        ELSEIF TALENT:혼인 == 1 || TALENT:사랑 == 2
            CSTR:1 = Love
        ELSEIF TALENT:짜증 && TALENT:사랑 == 2
            CSTR:1 = Annoyed2
        ENDIF
    CASE 108
        IF TALENT:혼인 == 2
            CSTR:1 = Marryed
        ELSEIF TALENT:혼인 == 1
            CSTR:1 = Love
        ENDIF
ENDSELECT
[SKIPSTART]
IF TALENT:사랑 == 1 && !TALENT:정신쇠약 && CFLAG:고백함 == 0
    CSTR:1 = Confession
ENDIF
[SKIPEND]
TRYCALLFORM M_No{NO:TARGET}_TRAIN_START_{CFLAG:조교여부}

@SET_MSG_CSTR(ARG)

IF TALENT:ARG:백치
    CSTR:ARG:1 = regress
ELSEIF TALENT:ARG:정신쇠약 == 2
    CSTR:ARG:1 = Break
ELSEIF TALENT:ARG:정신쇠약 == 1
    CSTR:ARG:1 = Weak
ELSEIF TALENT:ARG:혼인
    CSTR:ARG:1 = Marryed
ELSEIF TALENT:ARG:사랑 == 2
    CSTR:ARG:1 = Love
ELSEIF TALENT:ARG:혼인 == 1 || TALENT:ARG:사랑
    CSTR:ARG:1 = Affection
ELSEIF CFLAG:ARG:공포 > 199
    CSTR:ARG:1 = Fear
ELSEIF TALENT:ARG:짜증
    CSTR:ARG:1 = Annoyed
ELSEIF CFLAG:ARG:호감도 > 499
    CSTR:ARG:1 = High
ELSEIF CFLAG:ARG:호감도 < 500
    CSTR:ARG:1 = Low
ELSE
    CSTR:ARG:1 = 
ENDIF

;ARG = com번호
@BIO_COM_MSG(ARG)

CALL SET_MSG_CSTR(TARGET)

IF TFLAG:스트레스 > 0 || TFLAG:호감도 < 0
    LOCALS = Low
ELSEIF TFLAG:스트레스 < 0 || TFLAG:호감도 > 0
    LOCALS = High
ELSE
    LOCALS = Low
ENDIF

SELECTCASE NO:TARGET
    CASE 21
        IF GROUPMATCH(ARG, 5,9,14,16,20,21,22)
            IF TALENT:MASTER:나이 == 0
                CSTR:1 = Yboy
            ELSE
                CSTR:1 = Nboy
            ENDIF
        ELSEIF ARG == 15 && FIRSTTIME(ARG)
            IF TALENT:MASTER:나이 == 0
                CSTR:1 = Yboy
            ELSE
                CSTR:1 = Nboy
            ENDIF
        ENDIF
    CASE 68
        IF TALENT:ARG:정신쇠약 == 1 && TALENT:ARG:사랑 == 2
            CSTR:ARG:1 = Weak2
        ELSEIF CFLAG:ARG:공포 > 199 && TALENT:ARG:사랑 == 2
            CSTR:ARG:1 = Fear2
        ELSEIF TALENT:혼인 == 1 || TALENT:사랑 == 2
            CSTR:1 = Love
        ELSEIF TALENT:ARG:짜증 && TALENT:ARG:사랑 == 2
            CSTR:ARG:1 = Annoyed2
        ENDIF
    CASE 106
        SIF ARG == 2 && (CFLAG:etc1 > 0 && CFLAG:etc1 < 4)
            CSTR:1 = Cloth
    CASE 108
        IF TALENT:혼인 == 2
            CSTR:1 = Marryed
        ELSEIF TALENT:혼인 == 1
            CSTR:1 = Love
        ENDIF
ENDSELECT

SIF CSTR:1 == ""
    CSTR:1 = %LOCALS%

IF ARG == 2
    SIF CFLAG:호감도 < 400 && LOCALS == "High"
        LOCALS = Low

    SIF NO:TARGET == 76 && TALENT:TARGET:체형 == 0
        LOCALS = Young
ENDIF

TRYCALLFORM M_No{NO:TARGET}_COM{ARG}